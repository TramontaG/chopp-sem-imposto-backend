{"version":3,"file":"suggestionsController.js","names":["_","_interopRequireDefault","require","_SafeDatabaseTransaction","e","__esModule","default","suggestionDb","DbManager","suggestionController","createSuggestion","name","body","id","crypto","randomUUID","upsertEntity","author","createdAt","Date","now","updatedAt","deletedAt","transactionSuccess","getSuggestion","readEntity","updateSuggestion","deleteSuggestion","_default","exports"],"sources":["../../../src/database/controllers/suggestionsController.ts"],"sourcesContent":["import DbManager from \"..\";\nimport { transactionSuccess } from \"../../Util/SafeDatabaseTransaction\";\n\nconst suggestionDb = DbManager(\"suggestion\");\n\nconst suggestionController = () => {\n  const createSuggestion = async (name: string, body: string) => {\n    const id = crypto.randomUUID();\n    await suggestionDb.upsertEntity(id, {\n      id,\n      author: name,\n      body: body,\n      createdAt: Date.now(),\n      updatedAt: Date.now(),\n      deletedAt: null,\n    });\n\n    return transactionSuccess({ id, body });\n  };\n\n  const getSuggestion = (id: string) => {\n    return suggestionDb.readEntity(id);\n  };\n\n  const updateSuggestion = (id: string, name: string, body: string) => {\n    suggestionDb.upsertEntity(id, {\n      id,\n      author: name,\n      body: body,\n      updatedAt: Date.now(),\n    });\n  };\n\n  const deleteSuggestion = (id: string) => {\n    suggestionDb.upsertEntity(id, {\n      id,\n      deletedAt: Date.now(),\n    });\n  };\n\n  return {\n    createSuggestion,\n    getSuggestion,\n    updateSuggestion,\n    deleteSuggestion,\n  };\n};\n\nexport default suggestionController();\n"],"mappings":";;;;;;AAAA,IAAAA,CAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,wBAAA,GAAAD,OAAA;AAAwE,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAExE,MAAMG,YAAY,GAAG,IAAAC,SAAS,EAAC,YAAY,CAAC;AAE5C,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;EACjC,MAAMC,gBAAgB,GAAG,MAAAA,CAAOC,IAAY,EAAEC,IAAY,KAAK;IAC7D,MAAMC,EAAE,GAAGC,MAAM,CAACC,UAAU,CAAC,CAAC;IAC9B,MAAMR,YAAY,CAACS,YAAY,CAACH,EAAE,EAAE;MAClCA,EAAE;MACFI,MAAM,EAAEN,IAAI;MACZC,IAAI,EAAEA,IAAI;MACVM,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;MACrBC,SAAS,EAAEF,IAAI,CAACC,GAAG,CAAC,CAAC;MACrBE,SAAS,EAAE;IACb,CAAC,CAAC;IAEF,OAAO,IAAAC,2CAAkB,EAAC;MAAEV,EAAE;MAAED;IAAK,CAAC,CAAC;EACzC,CAAC;EAED,MAAMY,aAAa,GAAIX,EAAU,IAAK;IACpC,OAAON,YAAY,CAACkB,UAAU,CAACZ,EAAE,CAAC;EACpC,CAAC;EAED,MAAMa,gBAAgB,GAAGA,CAACb,EAAU,EAAEF,IAAY,EAAEC,IAAY,KAAK;IACnEL,YAAY,CAACS,YAAY,CAACH,EAAE,EAAE;MAC5BA,EAAE;MACFI,MAAM,EAAEN,IAAI;MACZC,IAAI,EAAEA,IAAI;MACVS,SAAS,EAAEF,IAAI,CAACC,GAAG,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC;EAED,MAAMO,gBAAgB,GAAId,EAAU,IAAK;IACvCN,YAAY,CAACS,YAAY,CAACH,EAAE,EAAE;MAC5BA,EAAE;MACFS,SAAS,EAAEH,IAAI,CAACC,GAAG,CAAC;IACtB,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLV,gBAAgB;IAChBc,aAAa;IACbE,gBAAgB;IAChBC;EACF,CAAC;AACH,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAvB,OAAA,GAEaG,oBAAoB,CAAC,CAAC","ignoreList":[]}