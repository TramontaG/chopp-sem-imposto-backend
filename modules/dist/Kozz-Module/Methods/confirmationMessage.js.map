{"version":3,"file":"confirmationMessage.js","names":["_","_interopRequireDefault","require","_mimeTypes","_yaseq","_sleep","_zeroWidth","_jsxRuntime","e","__esModule","default","sendMessageQueue","createTaskQueue","sendMessage","userId","message","imageUrl","fileName","split","at","mimeType","mime","lookup","Module","withMedia","data","transportType","duration","sizeInBytes","stickerTags","exports","sendMessageToContactList","contacts","messages","post_messages","Promise","all","map","contact","index","name","jid","awaitExecution","console","log","length","Message","Math","floor","random","PostMesasge","randomZeroWidthMessage","randomZeroWidth","min","max","jsx","sleep"],"sources":["../../../src/Kozz-Module/Methods/confirmationMessage.tsx"],"sourcesContent":["import Module from \"..\";\nimport mime from \"mime-types\";\nimport { createTaskQueue } from \"yaseq\";\nimport { sleep } from \"../../Util/sleep\";\nimport { randomZeroWidth } from \"../../Util/zero-width\";\n\nconst sendMessageQueue = createTaskQueue();\n\nexport const sendMessage = async (\n  userId: string,\n  message: string,\n  imageUrl?: string\n) => {\n  if (imageUrl) {\n    const fileName = imageUrl?.split(\"/\").at(-1);\n    const mimeType = mime.lookup(fileName || \"\");\n\n    Module.sendMessage.withMedia(userId, \"iae-baileys\", message, {\n      data: imageUrl,\n      transportType: \"url\",\n      duration: null,\n      fileName: imageUrl.split(\"/\").at(-1)!,\n      mimeType: mimeType || \"image/jpeg\",\n      sizeInBytes: 0,\n      stickerTags: [],\n    });\n  } else {\n    Module.sendMessage(userId, \"iae-baileys\", message);\n  }\n};\n\nexport const sendMessageToContactList = async ({\n  contacts,\n  messages,\n  post_messages,\n}: {\n  contacts: (readonly [string, string])[]; //tuple [jid, name]\n  messages: (({ name }: { name: string }) => string)[];\n  post_messages: (() => string)[];\n  imageURL?: string;\n}) => {\n  return Promise.all(\n    contacts.map(async (contact, index) => {\n      const [name, jid] = contact;\n\n      return sendMessageQueue.awaitExecution(async () => {\n        console.log(\n          \"Sending message to\",\n          `contact ${index + 1} of ${contacts.length} contacts\\n`,\n          `JID: ${jid} Name: ${name}`\n        );\n        const Message = messages[Math.floor(Math.random() * messages.length)];\n        const PostMesasge =\n          post_messages[Math.floor(Math.random() * post_messages.length)];\n        const randomZeroWidthMessage = randomZeroWidth({ min: 5, max: 20 });\n\n        await sendMessage(\n          jid,\n          <Message name={name} /> + randomZeroWidthMessage\n        );\n\n        await sleep(Math.random() * 15 * 1000 + 1500);\n\n        await sendMessage(jid, <PostMesasge /> + randomZeroWidthMessage);\n\n        await sleep(Math.random() * 20 * 1000 + 1500);\n        return true;\n      });\n    })\n  );\n};\n"],"mappings":"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","ignoreList":[]}