{"version":3,"file":"public.js","names":["_express","require","_bucketStorage","_mimeTypes","_interopRequireDefault","e","__esModule","default","publicRouter","Router","get","req","res","fileId","params","src","event","file","downloadFile","setHeader","mime","lookup","send","undefined","_default","exports"],"sources":["../../src/Router/public.ts"],"sourcesContent":["import { Router } from \"express\";\nimport { downloadFile } from \"../CDN/bucketStorage\";\nimport mime from \"mime-types\";\n\nconst publicRouter = Router();\n\npublicRouter.get(\"/:src/:event/:file\", async (req, res) => {\n  const fileId = `${req.params.src}/${req.params.event}/${req.params.file}`;\n  const file = await downloadFile(fileId);\n\n  res\n    .setHeader(\n      \"Content-Type\",\n      mime.lookup(req.params.file) || \"application/octet-steam\"\n    )\n    .send(file);\n\n  return undefined;\n});\n\nexport default publicRouter;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAC,sBAAA,CAAAH,OAAA;AAA8B,SAAAG,uBAAAC,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9B,MAAMG,YAAY,GAAG,IAAAC,eAAM,EAAC,CAAC;AAE7BD,YAAY,CAACE,GAAG,CAAC,oBAAoB,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACzD,MAAMC,MAAM,GAAG,GAAGF,GAAG,CAACG,MAAM,CAACC,GAAG,IAAIJ,GAAG,CAACG,MAAM,CAACE,KAAK,IAAIL,GAAG,CAACG,MAAM,CAACG,IAAI,EAAE;EACzE,MAAMA,IAAI,GAAG,MAAM,IAAAC,2BAAY,EAACL,MAAM,CAAC;EAEvCD,GAAG,CACAO,SAAS,CACR,cAAc,EACdC,kBAAI,CAACC,MAAM,CAACV,GAAG,CAACG,MAAM,CAACG,IAAI,CAAC,IAAI,yBAClC,CAAC,CACAK,IAAI,CAACL,IAAI,CAAC;EAEb,OAAOM,SAAS;AAClB,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAlB,OAAA,GAEYC,YAAY","ignoreList":[]}