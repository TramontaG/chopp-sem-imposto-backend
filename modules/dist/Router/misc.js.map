{"version":3,"file":"misc.js","names":["_express","_interopRequireWildcard","require","_verifyHMAC","_SafeRequest","V","_suggestionsController","_interopRequireDefault","_SafeDatabaseTransaction","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","MiscRouter","Router","post","useHMAC","json","safeRequest","req","res","name","suggestion","validate","string","body","createSuggestionTransaction","suggestionController","createSuggestion","safeReturnTransaction","_default","exports"],"sources":["../../src/Router/misc.ts"],"sourcesContent":["import Router, { json } from \"express\";\nimport { useHMAC } from \"../JWT/verifyHMAC\";\nimport { safeRequest } from \"../Util/SafeRequest\";\nimport * as V from \"../Util/ZodValidation\";\nimport suggestionController from \"../database/controllers/suggestionsController\";\nimport { safeReturnTransaction } from \"../Util/SafeDatabaseTransaction\";\n\nconst MiscRouter = Router();\n\nMiscRouter.post(\n  \"/suggestion\",\n  useHMAC,\n  json(),\n  safeRequest(async (req, res) => {\n    const { name, suggestion } = V.validate(\n      {\n        name: V.string,\n        suggestion: V.string,\n      },\n      req.body\n    );\n\n    const createSuggestionTransaction =\n      await suggestionController.createSuggestion(name, suggestion);\n\n    return safeReturnTransaction(createSuggestionTransaction);\n  })\n);\n\nexport default MiscRouter;\n"],"mappings":";;;;;;AAAA,IAAAA,QAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,YAAA,GAAAF,OAAA;AACA,IAAAG,CAAA,GAAAJ,uBAAA,CAAAC,OAAA;AACA,IAAAI,sBAAA,GAAAC,sBAAA,CAAAL,OAAA;AACA,IAAAM,wBAAA,GAAAN,OAAA;AAAwE,SAAAK,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAR,wBAAAQ,CAAA,EAAAG,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAZ,uBAAA,YAAAA,CAAAQ,CAAA,EAAAG,CAAA,SAAAA,CAAA,IAAAH,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAR,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAS,CAAA,MAAAF,CAAA,GAAAJ,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAX,CAAA,UAAAO,CAAA,CAAAK,GAAA,CAAAZ,CAAA,GAAAO,CAAA,CAAAM,GAAA,CAAAb,CAAA,EAAAS,CAAA,gBAAAN,CAAA,IAAAH,CAAA,gBAAAG,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAG,CAAA,OAAAK,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAG,CAAA,OAAAK,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAN,CAAA,EAAAK,CAAA,IAAAC,CAAA,CAAAN,CAAA,IAAAH,CAAA,CAAAG,CAAA,WAAAM,CAAA,KAAAT,CAAA,EAAAG,CAAA;AAExE,MAAMgB,UAAU,GAAG,IAAAC,gBAAM,EAAC,CAAC;AAE3BD,UAAU,CAACE,IAAI,CACb,aAAa,EACbC,mBAAO,EACP,IAAAC,aAAI,EAAC,CAAC,EACN,IAAAC,wBAAW,EAAC,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC9B,MAAM;IAAEC,IAAI;IAAEC;EAAW,CAAC,GAAGhC,CAAC,CAACiC,QAAQ,CACrC;IACEF,IAAI,EAAE/B,CAAC,CAACkC,MAAM;IACdF,UAAU,EAAEhC,CAAC,CAACkC;EAChB,CAAC,EACDL,GAAG,CAACM,IACN,CAAC;EAED,MAAMC,2BAA2B,GAC/B,MAAMC,8BAAoB,CAACC,gBAAgB,CAACP,IAAI,EAAEC,UAAU,CAAC;EAE/D,OAAO,IAAAO,8CAAqB,EAACH,2BAA2B,CAAC;AAC3D,CAAC,CACH,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAnC,OAAA,GAEaiB,UAAU","ignoreList":[]}